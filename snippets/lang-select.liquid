{%- render 'stylesheet', name: 'lang-select' -%}

{% form 'localization', id: 'localization_form', class: 'lang_switcher' %}
    <button class="localeBtn" disabled> {{ form.current_locale.endonym_name }}</button>
    <div class="lang-content">
        {% for language in localization.available_languages %}
             <a href="#"{% if language.iso_code == localization.language.iso_code %} aria-current="true"{% endif %} hreflang="{{ language.iso_code }}" lang="{{ language.iso_code }}" data-value="{{ language.iso_code }}">
                {{ language.endonym_name | capitalize }}
              </a>
        {% endfor %}
    </div>
    <input type="hidden" name="locale_code" value="{{ form.current_locale.iso_code }}" id="localeCode">
{% endform %}


<script>
    document.querySelectorAll("#localeItem").forEach(item => {
        item.addEventListener("click",  (e) => {
            document.getElementById("localeCode").value = item.getAttribute("lang");
            document.getElementById("localization_form").submit()
        })
    });
</script>